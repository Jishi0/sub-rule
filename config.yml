mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
unified-delay: true
external-controller: '127.0.0.1:9090'
dns:
  enabled: true
  ipv6: true
  listen: 127.0.0.1:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - dns.msftncsi.com
    - www.msftncsi.com
    - www.msftconnecttest.com
  use-hosts: true
  nameserver:
    - 'https://cloudflare-dns.com/dns-query#选择'
    - 'https://dns.google/dns-query#选择'
    - 'https://chrome.cloudflare-dns.com/dns-query#选择'
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://sm2.doh.pub/dns-query
    - https://doh.pub/dns-query
  nameserver-policy:
   geosite:cn,private:
    - https://dns.alidns.com/dns-query
    - https://sm2.doh.pub/dns-query
    - https://doh.pub/dns-query
sniffer:
  enable: false
  sniff: { TLS: { ports: [443, 8443] }, HTTP: { ports: [80, 8080-8880], override-destination: true } }
  skip-domain: ['Mijia Cloud', dlg.io.mi.com, +.apple.com]
  force-domain: [google.com]
geox-url:
  geoip: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat"
  geosite: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat"
proxy-groups:
  - { name: 选择, type: select, proxies: [手动,自动,直连,拒绝] }
  - { name: 手动, type: select, include-all-proxies: true}
  - { name: 自动, type: url-test, include-all-proxies: true, url: 'http://www.google.com/generate_204', interval: 600 }
  - { name: 直连, type: select, proxies: [DIRECT] }
  - { name: 拒绝, type: select, proxies: [REJECT] }
rule-providers:
  reject: { type: http, behavior: domain, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/reject.txt', path: ./ruleset/reject.yaml, interval: 86400 }
  icloud: { type: http, behavior: domain, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/icloud.txt', path: ./ruleset/icloud.yaml, interval: 86400 }
  apple: { type: http, behavior: domain, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/apple.txt', path: ./ruleset/apple.yaml, interval: 86400 }
  google: { type: http, behavior: domain, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/google.txt', path: ./ruleset/google.yaml, interval: 86400 }
  proxy: { type: http, behavior: domain, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/proxy.txt', path: ./ruleset/proxy.yaml, interval: 86400 }
  direct: { type: http, behavior: domain, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/direct.txt', path: ./ruleset/direct.yaml, interval: 86400 }
  private: { type: http, behavior: domain, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/private.txt', path: ./ruleset/private.yaml, interval: 86400 }
  gfw: { type: http, behavior: domain, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/gfw.txt', path: ./ruleset/gfw.yaml, interval: 86400 }
  tld-not-cn: { type: http, behavior: domain, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt', path: ./ruleset/tld-not-cn.yaml, interval: 86400 }
  telegramcidr: { type: http, behavior: ipcidr, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt', path: ./ruleset/telegramcidr.yaml, interval: 86400 }
  cncidr: { type: http, behavior: ipcidr, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/cncidr.txt', path: ./ruleset/cncidr.yaml, interval: 86400 }
  lancidr: { type: http, behavior: ipcidr, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/lancidr.txt', path: ./ruleset/lancidr.yaml, interval: 86400 }
  applications: { type: http, behavior: classical, url: 'https://jsd.cdn.zzko.cn/gh/Loyalsoldier/clash-rules@release/applications.txt', path: ./ruleset/applications.yaml, interval: 86400 }
rules:
  - 'DOMAIN-SUFFIX,googleapis.cn,选择'
  - 'RULE-SET,applications,直连'
  - 'RULE-SET,private,直连'
  - 'RULE-SET,reject,拒绝'
  - 'RULE-SET,icloud,直连'
  - 'RULE-SET,apple,直连'
  - 'RULE-SET,google,选择'
  - 'RULE-SET,proxy,选择'
  - 'RULE-SET,direct,直连'
  - 'RULE-SET,lancidr,直连'
  - 'RULE-SET,cncidr,直连'
  - 'RULE-SET,telegramcidr,选择'
  - 'GEOIP,LAN,直连'
  - 'GEOIP,CN,直连'
  - 'MATCH,选择'
